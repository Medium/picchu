---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  name: revisions.picchu.medium.engineering
spec:
  group: picchu.medium.engineering
  names:
    kind: Revision
    listKind: RevisionList
    plural: revisions
    singular: revision
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Revision is the Schema for the revisions API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: RevisionSpec defines the desired state of Revision
            properties:
              app:
                properties:
                  image:
                    type: string
                  name:
                    type: string
                  ref:
                    type: string
                  tag:
                    type: string
                required:
                - image
                - name
                - ref
                - tag
                type: object
              canaryWithSLIRules:
                type: boolean
              disableMirroring:
                type: boolean
              eventDriven:
                type: boolean
              failed:
                type: boolean
              ignoreSLOs:
                type: boolean
              sentry:
                properties:
                  release:
                    type: boolean
                type: object
              tagRoutingHeader:
                type: string
              targets:
                items:
                  properties:
                    acceptanceTarget:
                      type: boolean
                    affinity:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                    alertRules:
                      items:
                        description: |-
                          Rule describes an alerting or recording rule
                          See Prometheus documentation: [alerting](https://www.prometheus.io/docs/prometheus/latest/configuration/alerting_rules/) or [recording](https://www.prometheus.io/docs/prometheus/latest/configuration/recording_rules/#recording-rules) rule
                        properties:
                          alert:
                            description: |-
                              Name of the alert. Must be a valid label value.
                              Only one of `record` and `alert` must be set.
                            type: string
                          annotations:
                            additionalProperties:
                              type: string
                            description: |-
                              Annotations to add to each alert.
                              Only valid for alerting rules.
                            type: object
                          expr:
                            anyOf:
                            - type: integer
                            - type: string
                            description: PromQL expression to evaluate.
                            x-kubernetes-int-or-string: true
                          for:
                            description: Alerts are considered firing once they have
                              been returned for this long.
                            pattern: ^(0|(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?)$
                            type: string
                          labels:
                            additionalProperties:
                              type: string
                            description: Labels to add or overwrite.
                            type: object
                          record:
                            description: |-
                              Name of the time series to output to. Must be a valid metric name.
                              Only one of `record` and `alert` must be set.
                            type: string
                        required:
                        - expr
                        type: object
                      type: array
                    aws:
                      description: 'TODO(lyra): PodTemplate'
                      properties:
                        iam:
                          properties:
                            role_arn:
                              type: string
                          type: object
                      type: object
                    canary:
                      properties:
                        percent:
                          format: int32
                          type: integer
                        ttl:
                          format: int64
                          type: integer
                      required:
                      - percent
                      - ttl
                      type: object
                    configSelector:
                      description: |-
                        A label selector is a label query over a set of resources. The result of matchLabels and
                        matchExpressions are ANDed. An empty label selector matches all objects. A null
                        label selector matches no objects.
                      properties:
                        matchExpressions:
                          description: matchExpressions is a list of label selector
                            requirements. The requirements are ANDed.
                          items:
                            description: |-
                              A label selector requirement is a selector that contains values, a key, and an operator that
                              relates the key and values.
                            properties:
                              key:
                                description: key is the label key that the selector
                                  applies to.
                                type: string
                              operator:
                                description: |-
                                  operator represents a key's relationship to a set of values.
                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                type: string
                              values:
                                description: |-
                                  values is an array of string values. If the operator is In or NotIn,
                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                  the values array must be empty. This array is replaced during a strategic
                                  merge patch.
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            required:
                            - key
                            - operator
                            type: object
                          type: array
                          x-kubernetes-list-type: atomic
                        matchLabels:
                          additionalProperties:
                            type: string
                          description: |-
                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                          type: object
                      type: object
                      x-kubernetes-map-type: atomic
                    defaultIngressPorts:
                      additionalProperties:
                        type: string
                      type: object
                    env:
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0EnvVar'
                      type: array
                    externalTest:
                      properties:
                        completed:
                          type: boolean
                        enabled:
                          type: boolean
                        lastUpdated:
                          format: date-time
                          type: string
                        started:
                          type: boolean
                        succeeded:
                          type: boolean
                        timeout:
                          type: string
                      required:
                      - completed
                      - enabled
                      - started
                      type: object
                    fleet:
                      type: string
                    istio:
                      properties:
                        sidecar:
                          properties:
                            egressHosts:
                              items:
                                type: string
                              type: array
                          type: object
                        trafficPolicy:
                          description: |-
                            Traffic policies to apply for a specific destination, across all
                            destination ports. See DestinationRule for examples.
                          properties:
                            connectionPool:
                              description: Settings controlling the volume of connections
                                to an upstream service
                              properties:
                                http:
                                  description: HTTP connection pool settings.
                                  properties:
                                    h2_upgrade_policy:
                                      description: Specify if http1.1 connection should
                                        be upgraded to http2 for the associated destination.
                                      format: int32
                                      type: integer
                                    http1MaxPendingRequests:
                                      description: Maximum number of pending HTTP
                                        requests to a destination. Default 2^32-1.
                                      format: int32
                                      type: integer
                                    http2MaxRequests:
                                      description: Maximum number of requests to a
                                        backend. Default 2^32-1.
                                      format: int32
                                      type: integer
                                    idleTimeout:
                                      description: |-
                                        The idle timeout for upstream connection pool connections. The idle timeout
                                        is defined as the period in which there are no active requests.
                                        If not set, the default is 1 hour. When the idle timeout is reached,
                                        the connection will be closed. If the connection is an HTTP/2
                                        connection a drain sequence will occur prior to closing the connection.
                                        Note that request based timeouts mean that HTTP/2 PINGs will not
                                        keep the connection alive. Applies to both HTTP1.1 and HTTP2 connections.
                                      properties:
                                        nanos:
                                          description: |-
                                            Signed fractions of a second at nanosecond resolution of the span
                                            of time. Durations less than one second are represented with a 0
                                            `seconds` field and a positive or negative `nanos` field. For durations
                                            of one second or more, a non-zero value for the `nanos` field must be
                                            of the same sign as the `seconds` field. Must be from -999,999,999
                                            to +999,999,999 inclusive.
                                          format: int32
                                          type: integer
                                        seconds:
                                          description: |-
                                            Signed seconds of the span of time. Must be from -315,576,000,000
                                            to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                            60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                          format: int64
                                          type: integer
                                      type: object
                                    maxRequestsPerConnection:
                                      description: |-
                                        Maximum number of requests per connection to a backend. Setting this
                                        parameter to 1 disables keep alive. Default 0, meaning "unlimited",
                                        up to 2^29.
                                      format: int32
                                      type: integer
                                    maxRetries:
                                      description: |-
                                        Maximum number of retries that can be outstanding to all hosts in a
                                        cluster at a given time. Defaults to 2^32-1.
                                      format: int32
                                      type: integer
                                    useClientProtocol:
                                      description: |-
                                        If set to true, client protocol will be preserved while initiating connection to backend.
                                        Note that when this is set to true, h2_upgrade_policy will be ineffective i.e. the client
                                        connections will not be upgraded to http2.
                                      type: boolean
                                  type: object
                                tcp:
                                  description: Settings common to both HTTP and TCP
                                    upstream connections.
                                  properties:
                                    connectTimeout:
                                      description: |-
                                        TCP connection timeout. format:
                                        1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.
                                      properties:
                                        nanos:
                                          description: |-
                                            Signed fractions of a second at nanosecond resolution of the span
                                            of time. Durations less than one second are represented with a 0
                                            `seconds` field and a positive or negative `nanos` field. For durations
                                            of one second or more, a non-zero value for the `nanos` field must be
                                            of the same sign as the `seconds` field. Must be from -999,999,999
                                            to +999,999,999 inclusive.
                                          format: int32
                                          type: integer
                                        seconds:
                                          description: |-
                                            Signed seconds of the span of time. Must be from -315,576,000,000
                                            to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                            60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                          format: int64
                                          type: integer
                                      type: object
                                    maxConnections:
                                      description: Maximum number of HTTP1 /TCP connections
                                        to a destination host. Default 2^32-1.
                                      format: int32
                                      type: integer
                                    tcpKeepalive:
                                      description: If set then set SO_KEEPALIVE on
                                        the socket to enable TCP Keepalives.
                                      properties:
                                        interval:
                                          description: |-
                                            The time duration between keep-alive probes.
                                            Default is to use the OS level configuration
                                            (unless overridden, Linux defaults to 75s.)
                                          properties:
                                            nanos:
                                              description: |-
                                                Signed fractions of a second at nanosecond resolution of the span
                                                of time. Durations less than one second are represented with a 0
                                                `seconds` field and a positive or negative `nanos` field. For durations
                                                of one second or more, a non-zero value for the `nanos` field must be
                                                of the same sign as the `seconds` field. Must be from -999,999,999
                                                to +999,999,999 inclusive.
                                              format: int32
                                              type: integer
                                            seconds:
                                              description: |-
                                                Signed seconds of the span of time. Must be from -315,576,000,000
                                                to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                                60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                              format: int64
                                              type: integer
                                          type: object
                                        probes:
                                          description: |-
                                            Maximum number of keepalive probes to send without response before
                                            deciding the connection is dead. Default is to use the OS level configuration
                                            (unless overridden, Linux defaults to 9.)
                                          format: int32
                                          type: integer
                                        time:
                                          description: |-
                                            The time duration a connection needs to be idle before keep-alive
                                            probes start being sent. Default is to use the OS level configuration
                                            (unless overridden, Linux defaults to 7200s (ie 2 hours.)
                                          properties:
                                            nanos:
                                              description: |-
                                                Signed fractions of a second at nanosecond resolution of the span
                                                of time. Durations less than one second are represented with a 0
                                                `seconds` field and a positive or negative `nanos` field. For durations
                                                of one second or more, a non-zero value for the `nanos` field must be
                                                of the same sign as the `seconds` field. Must be from -999,999,999
                                                to +999,999,999 inclusive.
                                              format: int32
                                              type: integer
                                            seconds:
                                              description: |-
                                                Signed seconds of the span of time. Must be from -315,576,000,000
                                                to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                                60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                              format: int64
                                              type: integer
                                          type: object
                                      type: object
                                  type: object
                              type: object
                            loadBalancer:
                              description: Settings controlling the load balancer
                                algorithms.
                              properties:
                                localityLbSetting:
                                  description: |-
                                    Locality load balancer settings, this will override mesh wide settings in entirety, meaning no merging would be performed
                                    between this object and the object one in MeshConfig
                                  properties:
                                    distribute:
                                      description: |-
                                        Optional: only one of distribute, failover or failoverPriority can be set.
                                        Explicitly specify loadbalancing weight across different zones and geographical locations.
                                        Refer to [Locality weighted load balancing](https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/locality_weight)
                                        If empty, the locality weight is set according to the endpoints number within it.
                                      items:
                                        description: |-
                                          Describes how traffic originating in the 'from' zone or sub-zone is
                                          distributed over a set of 'to' zones. Syntax for specifying a zone is
                                          {region}/{zone}/{sub-zone} and terminal wildcards are allowed on any
                                          segment of the specification. Examples:


                                          `*` - matches all localities


                                          `us-west/*` - all zones and sub-zones within the us-west region


                                          `us-west/zone-1/*` - all sub-zones within us-west/zone-1
                                        properties:
                                          from:
                                            description: Originating locality, '/'
                                              separated, e.g. 'region/zone/sub_zone'.
                                            type: string
                                          to:
                                            additionalProperties:
                                              format: int32
                                              type: integer
                                            description: |-
                                              Map of upstream localities to traffic distribution weights. The sum of
                                              all weights should be 100. Any locality not present will
                                              receive no traffic.
                                            type: object
                                        type: object
                                      type: array
                                    enabled:
                                      description: |-
                                        enable locality load balancing, this is DestinationRule-level and will override mesh wide settings in entirety.
                                        e.g. true means that turn on locality load balancing for this DestinationRule no matter what mesh wide settings is.
                                      properties:
                                        value:
                                          description: The bool value.
                                          type: boolean
                                      type: object
                                    failover:
                                      description: |-
                                        Optional: only one of distribute, failover or failoverPriority can be set.
                                        Explicitly specify the region traffic will land on when endpoints in local region becomes unhealthy.
                                        Should be used together with OutlierDetection to detect unhealthy endpoints.
                                        Note: if no OutlierDetection specified, this will not take effect.
                                      items:
                                        description: |-
                                          Specify the traffic failover policy across regions. Since zone and sub-zone
                                          failover is supported by default this only needs to be specified for
                                          regions when the operator needs to constrain traffic failover so that
                                          the default behavior of failing over to any endpoint globally does not
                                          apply. This is useful when failing over traffic across regions would not
                                          improve service health or may need to be restricted for other reasons
                                          like regulatory controls.
                                        properties:
                                          from:
                                            description: Originating region.
                                            type: string
                                          to:
                                            description: |-
                                              Destination region the traffic will fail over to when endpoints in
                                              the 'from' region becomes unhealthy.
                                            type: string
                                        type: object
                                      type: array
                                    failoverPriority:
                                      description: |-
                                        failoverPriority is an ordered list of labels used to sort endpoints to do priority based load balancing.
                                        This is to support traffic failover across different groups of endpoints.
                                        Suppose there are total N labels specified:


                                        1. Endpoints matching all N labels with the client proxy have priority P(0) i.e. the highest priority.
                                        2. Endpoints matching the first N-1 labels with the client proxy have priority P(1) i.e. second highest priority.
                                        3. By extension of this logic, endpoints matching only the first label with the client proxy has priority P(N-1) i.e. second lowest priority.
                                        4. All the other endpoints have priority P(N) i.e. lowest priority.


                                        Note: For a label to be considered for match, the previous labels must match, i.e. nth label would be considered matched only if first n-1 labels match.


                                        It can be any label specified on both client and server workloads.
                                        The following labels which have special semantic meaning are also supported:


                                          - `topology.istio.io/network` is used to match the network metadata of an endpoint, which can be specified by pod/namespace label `topology.istio.io/network`, sidecar env `ISTIO_META_NETWORK` or MeshNetworks.
                                          - `topology.istio.io/cluster` is used to match the clusterID of an endpoint, which can be specified by pod label `topology.istio.io/cluster` or pod env `ISTIO_META_CLUSTER_ID`.
                                          - `topology.kubernetes.io/region` is used to match the region metadata of an endpoint, which maps to Kubernetes node label `topology.kubernetes.io/region` or the deprecated label `failure-domain.beta.kubernetes.io/region`.
                                          - `topology.kubernetes.io/zone` is used to match the zone metadata of an endpoint, which maps to Kubernetes node label `topology.kubernetes.io/zone` or the deprecated label `failure-domain.beta.kubernetes.io/zone`.
                                          - `topology.istio.io/subzone` is used to match the subzone metadata of an endpoint, which maps to Istio node label `topology.istio.io/subzone`.


                                        The below topology config indicates the following priority levels:


                                        ```yaml
                                        failoverPriority:
                                        - "topology.istio.io/network"
                                        - "topology.kubernetes.io/region"
                                        - "topology.kubernetes.io/zone"
                                        - "topology.istio.io/subzone"
                                        ```


                                        1. endpoints match same [network, region, zone, subzone] label with the client proxy have the highest priority.
                                        2. endpoints have same [network, region, zone] label but different [subzone] label with the client proxy have the second highest priority.
                                        3. endpoints have same [network, region] label but different [zone] label with the client proxy have the third highest priority.
                                        4. endpoints have same [network] but different [region] labels with the client proxy have the fourth highest priority.
                                        5. all the other endpoints have the same lowest priority.


                                        Optional: only one of distribute, failover or failoverPriority can be set.
                                        And it should be used together with `OutlierDetection` to detect unhealthy endpoints, otherwise has no effect.
                                      items:
                                        type: string
                                      type: array
                                  type: object
                                warmupDurationSecs:
                                  description: |-
                                    Represents the warmup duration of Service. If set, the newly created endpoint of service
                                    remains in warmup mode starting from its creation time for the duration of this window and
                                    Istio progressively increases amount of traffic for that endpoint instead of sending proportional amount of traffic.
                                    This should be enabled for services that require warm up time to serve full production load with reasonable latency.
                                    Currently this is only supported for ROUND_ROBIN and LEAST_CONN load balancers.
                                  properties:
                                    nanos:
                                      description: |-
                                        Signed fractions of a second at nanosecond resolution of the span
                                        of time. Durations less than one second are represented with a 0
                                        `seconds` field and a positive or negative `nanos` field. For durations
                                        of one second or more, a non-zero value for the `nanos` field must be
                                        of the same sign as the `seconds` field. Must be from -999,999,999
                                        to +999,999,999 inclusive.
                                      format: int32
                                      type: integer
                                    seconds:
                                      description: |-
                                        Signed seconds of the span of time. Must be from -315,576,000,000
                                        to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                        60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                      format: int64
                                      type: integer
                                  type: object
                              type: object
                            outlierDetection:
                              description: Settings controlling eviction of unhealthy
                                hosts from the load balancing pool
                              properties:
                                baseEjectionTime:
                                  description: |-
                                    Minimum ejection duration. A host will remain ejected for a period
                                    equal to the product of minimum ejection duration and the number of
                                    times the host has been ejected. This technique allows the system to
                                    automatically increase the ejection period for unhealthy upstream
                                    servers. format: 1h/1m/1s/1ms. MUST BE >=1ms. Default is 30s.
                                  properties:
                                    nanos:
                                      description: |-
                                        Signed fractions of a second at nanosecond resolution of the span
                                        of time. Durations less than one second are represented with a 0
                                        `seconds` field and a positive or negative `nanos` field. For durations
                                        of one second or more, a non-zero value for the `nanos` field must be
                                        of the same sign as the `seconds` field. Must be from -999,999,999
                                        to +999,999,999 inclusive.
                                      format: int32
                                      type: integer
                                    seconds:
                                      description: |-
                                        Signed seconds of the span of time. Must be from -315,576,000,000
                                        to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                        60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                      format: int64
                                      type: integer
                                  type: object
                                consecutive5xxErrors:
                                  description: |-
                                    Number of 5xx errors before a host is ejected from the connection pool.
                                    When the upstream host is accessed over an opaque TCP connection, connect
                                    timeouts, connection error/failure and request failure events qualify as a
                                    5xx error.
                                    This feature defaults to 5 but can be disabled by setting the value to 0.


                                    Note that consecutive_gateway_errors and consecutive_5xx_errors can be
                                    used separately or together. Because the errors counted by
                                    consecutive_gateway_errors are also included in consecutive_5xx_errors,
                                    if the value of consecutive_gateway_errors is greater than or equal to
                                    the value of consecutive_5xx_errors, consecutive_gateway_errors will have
                                    no effect.
                                  properties:
                                    value:
                                      description: The uint32 value.
                                      format: int32
                                      type: integer
                                  type: object
                                consecutiveErrors:
                                  description: |-
                                    Number of errors before a host is ejected from the connection
                                    pool. Defaults to 5. When the upstream host is accessed over HTTP, a
                                    502, 503, or 504 return code qualifies as an error. When the upstream host
                                    is accessed over an opaque TCP connection, connect timeouts and
                                    connection error/failure events qualify as an error.
                                    $hide_from_docs
                                  format: int32
                                  type: integer
                                consecutiveGatewayErrors:
                                  description: |-
                                    Number of gateway errors before a host is ejected from the connection pool.
                                    When the upstream host is accessed over HTTP, a 502, 503, or 504 return
                                    code qualifies as a gateway error. When the upstream host is accessed over
                                    an opaque TCP connection, connect timeouts and connection error/failure
                                    events qualify as a gateway error.
                                    This feature is disabled by default or when set to the value 0.


                                    Note that consecutive_gateway_errors and consecutive_5xx_errors can be
                                    used separately or together. Because the errors counted by
                                    consecutive_gateway_errors are also included in consecutive_5xx_errors,
                                    if the value of consecutive_gateway_errors is greater than or equal to
                                    the value of consecutive_5xx_errors, consecutive_gateway_errors will have
                                    no effect.
                                  properties:
                                    value:
                                      description: The uint32 value.
                                      format: int32
                                      type: integer
                                  type: object
                                consecutiveLocalOriginFailures:
                                  description: |-
                                    The number of consecutive locally originated failures before ejection
                                    occurs. Defaults to 5. Parameter takes effect only when split_external_local_origin_errors
                                    is set to true.
                                  properties:
                                    value:
                                      description: The uint32 value.
                                      format: int32
                                      type: integer
                                  type: object
                                interval:
                                  description: |-
                                    Time interval between ejection sweep analysis. format:
                                    1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.
                                  properties:
                                    nanos:
                                      description: |-
                                        Signed fractions of a second at nanosecond resolution of the span
                                        of time. Durations less than one second are represented with a 0
                                        `seconds` field and a positive or negative `nanos` field. For durations
                                        of one second or more, a non-zero value for the `nanos` field must be
                                        of the same sign as the `seconds` field. Must be from -999,999,999
                                        to +999,999,999 inclusive.
                                      format: int32
                                      type: integer
                                    seconds:
                                      description: |-
                                        Signed seconds of the span of time. Must be from -315,576,000,000
                                        to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                        60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                      format: int64
                                      type: integer
                                  type: object
                                maxEjectionPercent:
                                  description: |-
                                    Maximum % of hosts in the load balancing pool for the upstream
                                    service that can be ejected. Defaults to 10%.
                                  format: int32
                                  type: integer
                                minHealthPercent:
                                  description: |-
                                    Outlier detection will be enabled as long as the associated load balancing
                                    pool has at least min_health_percent hosts in healthy mode. When the
                                    percentage of healthy hosts in the load balancing pool drops below this
                                    threshold, outlier detection will be disabled and the proxy will load balance
                                    across all hosts in the pool (healthy and unhealthy). The threshold can be
                                    disabled by setting it to 0%. The default is 0% as it's not typically
                                    applicable in k8s environments with few pods per service.
                                  format: int32
                                  type: integer
                                splitExternalLocalOriginErrors:
                                  description: |-
                                    Determines whether to distinguish local origin failures from external errors. If set to true
                                    consecutive_local_origin_failure is taken into account for outlier detection calculations.
                                    This should be used when you want to derive the outlier detection status based on the errors
                                    seen locally such as failure to connect, timeout while connecting etc. rather than the status code
                                    retuned by upstream service. This is especially useful when the upstream service explicitly returns
                                    a 5xx for some requests and you want to ignore those responses from upstream service while determining
                                    the outlier detection status of a host.
                                    Defaults to false.
                                  type: boolean
                              type: object
                            portLevelSettings:
                              description: |-
                                Traffic policies specific to individual ports. Note that port level
                                settings will override the destination-level settings. Traffic
                                settings specified at the destination-level will not be inherited when
                                overridden by port-level settings, i.e. default values will be applied
                                to fields omitted in port-level traffic policies.
                              items:
                                description: Traffic policies that apply to specific
                                  ports of the service
                                properties:
                                  connectionPool:
                                    description: Settings controlling the volume of
                                      connections to an upstream service
                                    properties:
                                      http:
                                        description: HTTP connection pool settings.
                                        properties:
                                          h2_upgrade_policy:
                                            description: Specify if http1.1 connection
                                              should be upgraded to http2 for the
                                              associated destination.
                                            format: int32
                                            type: integer
                                          http1MaxPendingRequests:
                                            description: Maximum number of pending
                                              HTTP requests to a destination. Default
                                              2^32-1.
                                            format: int32
                                            type: integer
                                          http2MaxRequests:
                                            description: Maximum number of requests
                                              to a backend. Default 2^32-1.
                                            format: int32
                                            type: integer
                                          idleTimeout:
                                            description: |-
                                              The idle timeout for upstream connection pool connections. The idle timeout
                                              is defined as the period in which there are no active requests.
                                              If not set, the default is 1 hour. When the idle timeout is reached,
                                              the connection will be closed. If the connection is an HTTP/2
                                              connection a drain sequence will occur prior to closing the connection.
                                              Note that request based timeouts mean that HTTP/2 PINGs will not
                                              keep the connection alive. Applies to both HTTP1.1 and HTTP2 connections.
                                            properties:
                                              nanos:
                                                description: |-
                                                  Signed fractions of a second at nanosecond resolution of the span
                                                  of time. Durations less than one second are represented with a 0
                                                  `seconds` field and a positive or negative `nanos` field. For durations
                                                  of one second or more, a non-zero value for the `nanos` field must be
                                                  of the same sign as the `seconds` field. Must be from -999,999,999
                                                  to +999,999,999 inclusive.
                                                format: int32
                                                type: integer
                                              seconds:
                                                description: |-
                                                  Signed seconds of the span of time. Must be from -315,576,000,000
                                                  to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                                  60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                                format: int64
                                                type: integer
                                            type: object
                                          maxRequestsPerConnection:
                                            description: |-
                                              Maximum number of requests per connection to a backend. Setting this
                                              parameter to 1 disables keep alive. Default 0, meaning "unlimited",
                                              up to 2^29.
                                            format: int32
                                            type: integer
                                          maxRetries:
                                            description: |-
                                              Maximum number of retries that can be outstanding to all hosts in a
                                              cluster at a given time. Defaults to 2^32-1.
                                            format: int32
                                            type: integer
                                          useClientProtocol:
                                            description: |-
                                              If set to true, client protocol will be preserved while initiating connection to backend.
                                              Note that when this is set to true, h2_upgrade_policy will be ineffective i.e. the client
                                              connections will not be upgraded to http2.
                                            type: boolean
                                        type: object
                                      tcp:
                                        description: Settings common to both HTTP
                                          and TCP upstream connections.
                                        properties:
                                          connectTimeout:
                                            description: |-
                                              TCP connection timeout. format:
                                              1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.
                                            properties:
                                              nanos:
                                                description: |-
                                                  Signed fractions of a second at nanosecond resolution of the span
                                                  of time. Durations less than one second are represented with a 0
                                                  `seconds` field and a positive or negative `nanos` field. For durations
                                                  of one second or more, a non-zero value for the `nanos` field must be
                                                  of the same sign as the `seconds` field. Must be from -999,999,999
                                                  to +999,999,999 inclusive.
                                                format: int32
                                                type: integer
                                              seconds:
                                                description: |-
                                                  Signed seconds of the span of time. Must be from -315,576,000,000
                                                  to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                                  60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                                format: int64
                                                type: integer
                                            type: object
                                          maxConnections:
                                            description: Maximum number of HTTP1 /TCP
                                              connections to a destination host. Default
                                              2^32-1.
                                            format: int32
                                            type: integer
                                          tcpKeepalive:
                                            description: If set then set SO_KEEPALIVE
                                              on the socket to enable TCP Keepalives.
                                            properties:
                                              interval:
                                                description: |-
                                                  The time duration between keep-alive probes.
                                                  Default is to use the OS level configuration
                                                  (unless overridden, Linux defaults to 75s.)
                                                properties:
                                                  nanos:
                                                    description: |-
                                                      Signed fractions of a second at nanosecond resolution of the span
                                                      of time. Durations less than one second are represented with a 0
                                                      `seconds` field and a positive or negative `nanos` field. For durations
                                                      of one second or more, a non-zero value for the `nanos` field must be
                                                      of the same sign as the `seconds` field. Must be from -999,999,999
                                                      to +999,999,999 inclusive.
                                                    format: int32
                                                    type: integer
                                                  seconds:
                                                    description: |-
                                                      Signed seconds of the span of time. Must be from -315,576,000,000
                                                      to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                                      60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                                    format: int64
                                                    type: integer
                                                type: object
                                              probes:
                                                description: |-
                                                  Maximum number of keepalive probes to send without response before
                                                  deciding the connection is dead. Default is to use the OS level configuration
                                                  (unless overridden, Linux defaults to 9.)
                                                format: int32
                                                type: integer
                                              time:
                                                description: |-
                                                  The time duration a connection needs to be idle before keep-alive
                                                  probes start being sent. Default is to use the OS level configuration
                                                  (unless overridden, Linux defaults to 7200s (ie 2 hours.)
                                                properties:
                                                  nanos:
                                                    description: |-
                                                      Signed fractions of a second at nanosecond resolution of the span
                                                      of time. Durations less than one second are represented with a 0
                                                      `seconds` field and a positive or negative `nanos` field. For durations
                                                      of one second or more, a non-zero value for the `nanos` field must be
                                                      of the same sign as the `seconds` field. Must be from -999,999,999
                                                      to +999,999,999 inclusive.
                                                    format: int32
                                                    type: integer
                                                  seconds:
                                                    description: |-
                                                      Signed seconds of the span of time. Must be from -315,576,000,000
                                                      to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                                      60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                                    format: int64
                                                    type: integer
                                                type: object
                                            type: object
                                        type: object
                                    type: object
                                  loadBalancer:
                                    description: Settings controlling the load balancer
                                      algorithms.
                                    properties:
                                      localityLbSetting:
                                        description: |-
                                          Locality load balancer settings, this will override mesh wide settings in entirety, meaning no merging would be performed
                                          between this object and the object one in MeshConfig
                                        properties:
                                          distribute:
                                            description: |-
                                              Optional: only one of distribute, failover or failoverPriority can be set.
                                              Explicitly specify loadbalancing weight across different zones and geographical locations.
                                              Refer to [Locality weighted load balancing](https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/locality_weight)
                                              If empty, the locality weight is set according to the endpoints number within it.
                                            items:
                                              description: |-
                                                Describes how traffic originating in the 'from' zone or sub-zone is
                                                distributed over a set of 'to' zones. Syntax for specifying a zone is
                                                {region}/{zone}/{sub-zone} and terminal wildcards are allowed on any
                                                segment of the specification. Examples:


                                                `*` - matches all localities


                                                `us-west/*` - all zones and sub-zones within the us-west region


                                                `us-west/zone-1/*` - all sub-zones within us-west/zone-1
                                              properties:
                                                from:
                                                  description: Originating locality,
                                                    '/' separated, e.g. 'region/zone/sub_zone'.
                                                  type: string
                                                to:
                                                  additionalProperties:
                                                    format: int32
                                                    type: integer
                                                  description: |-
                                                    Map of upstream localities to traffic distribution weights. The sum of
                                                    all weights should be 100. Any locality not present will
                                                    receive no traffic.
                                                  type: object
                                              type: object
                                            type: array
                                          enabled:
                                            description: |-
                                              enable locality load balancing, this is DestinationRule-level and will override mesh wide settings in entirety.
                                              e.g. true means that turn on locality load balancing for this DestinationRule no matter what mesh wide settings is.
                                            properties:
                                              value:
                                                description: The bool value.
                                                type: boolean
                                            type: object
                                          failover:
                                            description: |-
                                              Optional: only one of distribute, failover or failoverPriority can be set.
                                              Explicitly specify the region traffic will land on when endpoints in local region becomes unhealthy.
                                              Should be used together with OutlierDetection to detect unhealthy endpoints.
                                              Note: if no OutlierDetection specified, this will not take effect.
                                            items:
                                              description: |-
                                                Specify the traffic failover policy across regions. Since zone and sub-zone
                                                failover is supported by default this only needs to be specified for
                                                regions when the operator needs to constrain traffic failover so that
                                                the default behavior of failing over to any endpoint globally does not
                                                apply. This is useful when failing over traffic across regions would not
                                                improve service health or may need to be restricted for other reasons
                                                like regulatory controls.
                                              properties:
                                                from:
                                                  description: Originating region.
                                                  type: string
                                                to:
                                                  description: |-
                                                    Destination region the traffic will fail over to when endpoints in
                                                    the 'from' region becomes unhealthy.
                                                  type: string
                                              type: object
                                            type: array
                                          failoverPriority:
                                            description: |-
                                              failoverPriority is an ordered list of labels used to sort endpoints to do priority based load balancing.
                                              This is to support traffic failover across different groups of endpoints.
                                              Suppose there are total N labels specified:


                                              1. Endpoints matching all N labels with the client proxy have priority P(0) i.e. the highest priority.
                                              2. Endpoints matching the first N-1 labels with the client proxy have priority P(1) i.e. second highest priority.
                                              3. By extension of this logic, endpoints matching only the first label with the client proxy has priority P(N-1) i.e. second lowest priority.
                                              4. All the other endpoints have priority P(N) i.e. lowest priority.


                                              Note: For a label to be considered for match, the previous labels must match, i.e. nth label would be considered matched only if first n-1 labels match.


                                              It can be any label specified on both client and server workloads.
                                              The following labels which have special semantic meaning are also supported:


                                                - `topology.istio.io/network` is used to match the network metadata of an endpoint, which can be specified by pod/namespace label `topology.istio.io/network`, sidecar env `ISTIO_META_NETWORK` or MeshNetworks.
                                                - `topology.istio.io/cluster` is used to match the clusterID of an endpoint, which can be specified by pod label `topology.istio.io/cluster` or pod env `ISTIO_META_CLUSTER_ID`.
                                                - `topology.kubernetes.io/region` is used to match the region metadata of an endpoint, which maps to Kubernetes node label `topology.kubernetes.io/region` or the deprecated label `failure-domain.beta.kubernetes.io/region`.
                                                - `topology.kubernetes.io/zone` is used to match the zone metadata of an endpoint, which maps to Kubernetes node label `topology.kubernetes.io/zone` or the deprecated label `failure-domain.beta.kubernetes.io/zone`.
                                                - `topology.istio.io/subzone` is used to match the subzone metadata of an endpoint, which maps to Istio node label `topology.istio.io/subzone`.


                                              The below topology config indicates the following priority levels:


                                              ```yaml
                                              failoverPriority:
                                              - "topology.istio.io/network"
                                              - "topology.kubernetes.io/region"
                                              - "topology.kubernetes.io/zone"
                                              - "topology.istio.io/subzone"
                                              ```


                                              1. endpoints match same [network, region, zone, subzone] label with the client proxy have the highest priority.
                                              2. endpoints have same [network, region, zone] label but different [subzone] label with the client proxy have the second highest priority.
                                              3. endpoints have same [network, region] label but different [zone] label with the client proxy have the third highest priority.
                                              4. endpoints have same [network] but different [region] labels with the client proxy have the fourth highest priority.
                                              5. all the other endpoints have the same lowest priority.


                                              Optional: only one of distribute, failover or failoverPriority can be set.
                                              And it should be used together with `OutlierDetection` to detect unhealthy endpoints, otherwise has no effect.
                                            items:
                                              type: string
                                            type: array
                                        type: object
                                      warmupDurationSecs:
                                        description: |-
                                          Represents the warmup duration of Service. If set, the newly created endpoint of service
                                          remains in warmup mode starting from its creation time for the duration of this window and
                                          Istio progressively increases amount of traffic for that endpoint instead of sending proportional amount of traffic.
                                          This should be enabled for services that require warm up time to serve full production load with reasonable latency.
                                          Currently this is only supported for ROUND_ROBIN and LEAST_CONN load balancers.
                                        properties:
                                          nanos:
                                            description: |-
                                              Signed fractions of a second at nanosecond resolution of the span
                                              of time. Durations less than one second are represented with a 0
                                              `seconds` field and a positive or negative `nanos` field. For durations
                                              of one second or more, a non-zero value for the `nanos` field must be
                                              of the same sign as the `seconds` field. Must be from -999,999,999
                                              to +999,999,999 inclusive.
                                            format: int32
                                            type: integer
                                          seconds:
                                            description: |-
                                              Signed seconds of the span of time. Must be from -315,576,000,000
                                              to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                              60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                            format: int64
                                            type: integer
                                        type: object
                                    type: object
                                  outlierDetection:
                                    description: Settings controlling eviction of
                                      unhealthy hosts from the load balancing pool
                                    properties:
                                      baseEjectionTime:
                                        description: |-
                                          Minimum ejection duration. A host will remain ejected for a period
                                          equal to the product of minimum ejection duration and the number of
                                          times the host has been ejected. This technique allows the system to
                                          automatically increase the ejection period for unhealthy upstream
                                          servers. format: 1h/1m/1s/1ms. MUST BE >=1ms. Default is 30s.
                                        properties:
                                          nanos:
                                            description: |-
                                              Signed fractions of a second at nanosecond resolution of the span
                                              of time. Durations less than one second are represented with a 0
                                              `seconds` field and a positive or negative `nanos` field. For durations
                                              of one second or more, a non-zero value for the `nanos` field must be
                                              of the same sign as the `seconds` field. Must be from -999,999,999
                                              to +999,999,999 inclusive.
                                            format: int32
                                            type: integer
                                          seconds:
                                            description: |-
                                              Signed seconds of the span of time. Must be from -315,576,000,000
                                              to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                              60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                            format: int64
                                            type: integer
                                        type: object
                                      consecutive5xxErrors:
                                        description: |-
                                          Number of 5xx errors before a host is ejected from the connection pool.
                                          When the upstream host is accessed over an opaque TCP connection, connect
                                          timeouts, connection error/failure and request failure events qualify as a
                                          5xx error.
                                          This feature defaults to 5 but can be disabled by setting the value to 0.


                                          Note that consecutive_gateway_errors and consecutive_5xx_errors can be
                                          used separately or together. Because the errors counted by
                                          consecutive_gateway_errors are also included in consecutive_5xx_errors,
                                          if the value of consecutive_gateway_errors is greater than or equal to
                                          the value of consecutive_5xx_errors, consecutive_gateway_errors will have
                                          no effect.
                                        properties:
                                          value:
                                            description: The uint32 value.
                                            format: int32
                                            type: integer
                                        type: object
                                      consecutiveErrors:
                                        description: |-
                                          Number of errors before a host is ejected from the connection
                                          pool. Defaults to 5. When the upstream host is accessed over HTTP, a
                                          502, 503, or 504 return code qualifies as an error. When the upstream host
                                          is accessed over an opaque TCP connection, connect timeouts and
                                          connection error/failure events qualify as an error.
                                          $hide_from_docs
                                        format: int32
                                        type: integer
                                      consecutiveGatewayErrors:
                                        description: |-
                                          Number of gateway errors before a host is ejected from the connection pool.
                                          When the upstream host is accessed over HTTP, a 502, 503, or 504 return
                                          code qualifies as a gateway error. When the upstream host is accessed over
                                          an opaque TCP connection, connect timeouts and connection error/failure
                                          events qualify as a gateway error.
                                          This feature is disabled by default or when set to the value 0.


                                          Note that consecutive_gateway_errors and consecutive_5xx_errors can be
                                          used separately or together. Because the errors counted by
                                          consecutive_gateway_errors are also included in consecutive_5xx_errors,
                                          if the value of consecutive_gateway_errors is greater than or equal to
                                          the value of consecutive_5xx_errors, consecutive_gateway_errors will have
                                          no effect.
                                        properties:
                                          value:
                                            description: The uint32 value.
                                            format: int32
                                            type: integer
                                        type: object
                                      consecutiveLocalOriginFailures:
                                        description: |-
                                          The number of consecutive locally originated failures before ejection
                                          occurs. Defaults to 5. Parameter takes effect only when split_external_local_origin_errors
                                          is set to true.
                                        properties:
                                          value:
                                            description: The uint32 value.
                                            format: int32
                                            type: integer
                                        type: object
                                      interval:
                                        description: |-
                                          Time interval between ejection sweep analysis. format:
                                          1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.
                                        properties:
                                          nanos:
                                            description: |-
                                              Signed fractions of a second at nanosecond resolution of the span
                                              of time. Durations less than one second are represented with a 0
                                              `seconds` field and a positive or negative `nanos` field. For durations
                                              of one second or more, a non-zero value for the `nanos` field must be
                                              of the same sign as the `seconds` field. Must be from -999,999,999
                                              to +999,999,999 inclusive.
                                            format: int32
                                            type: integer
                                          seconds:
                                            description: |-
                                              Signed seconds of the span of time. Must be from -315,576,000,000
                                              to +315,576,000,000 inclusive. Note: these bounds are computed from:
                                              60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years
                                            format: int64
                                            type: integer
                                        type: object
                                      maxEjectionPercent:
                                        description: |-
                                          Maximum % of hosts in the load balancing pool for the upstream
                                          service that can be ejected. Defaults to 10%.
                                        format: int32
                                        type: integer
                                      minHealthPercent:
                                        description: |-
                                          Outlier detection will be enabled as long as the associated load balancing
                                          pool has at least min_health_percent hosts in healthy mode. When the
                                          percentage of healthy hosts in the load balancing pool drops below this
                                          threshold, outlier detection will be disabled and the proxy will load balance
                                          across all hosts in the pool (healthy and unhealthy). The threshold can be
                                          disabled by setting it to 0%. The default is 0% as it's not typically
                                          applicable in k8s environments with few pods per service.
                                        format: int32
                                        type: integer
                                      splitExternalLocalOriginErrors:
                                        description: |-
                                          Determines whether to distinguish local origin failures from external errors. If set to true
                                          consecutive_local_origin_failure is taken into account for outlier detection calculations.
                                          This should be used when you want to derive the outlier detection status based on the errors
                                          seen locally such as failure to connect, timeout while connecting etc. rather than the status code
                                          retuned by upstream service. This is especially useful when the upstream service explicitly returns
                                          a 5xx for some requests and you want to ignore those responses from upstream service while determining
                                          the outlier detection status of a host.
                                          Defaults to false.
                                        type: boolean
                                    type: object
                                  port:
                                    description: |-
                                      Specifies the number of a port on the destination service
                                      on which this policy is being applied.
                                    properties:
                                      number:
                                        description: Valid port number
                                        format: int32
                                        type: integer
                                    type: object
                                  tls:
                                    description: TLS related settings for connections
                                      to the upstream service.
                                    properties:
                                      caCertificates:
                                        description: |-
                                          OPTIONAL: The path to the file containing certificate authority
                                          certificates to use in verifying a presented server certificate. If
                                          omitted, the proxy will not verify the server's certificate.
                                          Should be empty if mode is `ISTIO_MUTUAL`.
                                        type: string
                                      clientCertificate:
                                        description: |-
                                          REQUIRED if mode is `MUTUAL`. The path to the file holding the
                                          client-side TLS certificate to use.
                                          Should be empty if mode is `ISTIO_MUTUAL`.
                                        type: string
                                      credentialName:
                                        description: |-
                                          The name of the secret that holds the TLS certs for the
                                          client including the CA certificates. Secret must exist in the
                                          same namespace with the proxy using the certificates.
                                          The secret (of type `generic`)should contain the
                                          following keys and values: `key: <privateKey>`,
                                          `cert: <clientCert>`, `cacert: <CACertificate>`.
                                          Here CACertificate is used to verify the server certificate.
                                          Secret of type tls for client certificates along with
                                          ca.crt key for CA certificates is also supported.
                                          Only one of client certificates and CA certificate
                                          or credentialName can be specified.


                                          **NOTE:** This field is currently applicable only at gateways.
                                          Sidecars will continue to use the certificate paths.
                                        type: string
                                      insecureSkipVerify:
                                        description: |-
                                          InsecureSkipVerify specifies whether the proxy should skip verifying the
                                          CA signature and SAN for the server certificate corresponding to the host.
                                          This flag should only be set if global CA signature verifcation is
                                          enabled, `VerifyCertAtClient` environmental variable is set to `true`,
                                          but no verification is desired for a specific host. If enabled with or
                                          without `VerifyCertAtClient` enabled, verification of the CA signature and
                                          SAN will be skipped.


                                          `InsecureSkipVerify` is `false` by default.
                                          `VerifyCertAtClient` is `false` by default in Istio version 1.9 but will
                                          be `true` by default in a later version where, going forward, it will be
                                          enabled by default.
                                        properties:
                                          value:
                                            description: The bool value.
                                            type: boolean
                                        type: object
                                      mode:
                                        description: |-
                                          Indicates whether connections to this port should be secured
                                          using TLS. The value of this field determines how TLS is enforced.
                                        format: int32
                                        type: integer
                                      privateKey:
                                        description: |-
                                          REQUIRED if mode is `MUTUAL`. The path to the file holding the
                                          client's private key.
                                          Should be empty if mode is `ISTIO_MUTUAL`.
                                        type: string
                                      sni:
                                        description: SNI string to present to the
                                          server during TLS handshake.
                                        type: string
                                      subjectAltNames:
                                        description: |-
                                          A list of alternate names to verify the subject identity in the
                                          certificate. If specified, the proxy will verify that the server
                                          certificate's subject alt name matches one of the specified values.
                                          If specified, this list overrides the value of subject_alt_names
                                          from the ServiceEntry.
                                        items:
                                          type: string
                                        type: array
                                    type: object
                                type: object
                              type: array
                            tls:
                              description: TLS related settings for connections to
                                the upstream service.
                              properties:
                                caCertificates:
                                  description: |-
                                    OPTIONAL: The path to the file containing certificate authority
                                    certificates to use in verifying a presented server certificate. If
                                    omitted, the proxy will not verify the server's certificate.
                                    Should be empty if mode is `ISTIO_MUTUAL`.
                                  type: string
                                clientCertificate:
                                  description: |-
                                    REQUIRED if mode is `MUTUAL`. The path to the file holding the
                                    client-side TLS certificate to use.
                                    Should be empty if mode is `ISTIO_MUTUAL`.
                                  type: string
                                credentialName:
                                  description: |-
                                    The name of the secret that holds the TLS certs for the
                                    client including the CA certificates. Secret must exist in the
                                    same namespace with the proxy using the certificates.
                                    The secret (of type `generic`)should contain the
                                    following keys and values: `key: <privateKey>`,
                                    `cert: <clientCert>`, `cacert: <CACertificate>`.
                                    Here CACertificate is used to verify the server certificate.
                                    Secret of type tls for client certificates along with
                                    ca.crt key for CA certificates is also supported.
                                    Only one of client certificates and CA certificate
                                    or credentialName can be specified.


                                    **NOTE:** This field is currently applicable only at gateways.
                                    Sidecars will continue to use the certificate paths.
                                  type: string
                                insecureSkipVerify:
                                  description: |-
                                    InsecureSkipVerify specifies whether the proxy should skip verifying the
                                    CA signature and SAN for the server certificate corresponding to the host.
                                    This flag should only be set if global CA signature verifcation is
                                    enabled, `VerifyCertAtClient` environmental variable is set to `true`,
                                    but no verification is desired for a specific host. If enabled with or
                                    without `VerifyCertAtClient` enabled, verification of the CA signature and
                                    SAN will be skipped.


                                    `InsecureSkipVerify` is `false` by default.
                                    `VerifyCertAtClient` is `false` by default in Istio version 1.9 but will
                                    be `true` by default in a later version where, going forward, it will be
                                    enabled by default.
                                  properties:
                                    value:
                                      description: The bool value.
                                      type: boolean
                                  type: object
                                mode:
                                  description: |-
                                    Indicates whether connections to this port should be secured
                                    using TLS. The value of this field determines how TLS is enforced.
                                  format: int32
                                  type: integer
                                privateKey:
                                  description: |-
                                    REQUIRED if mode is `MUTUAL`. The path to the file holding the
                                    client's private key.
                                    Should be empty if mode is `ISTIO_MUTUAL`.
                                  type: string
                                sni:
                                  description: SNI string to present to the server
                                    during TLS handshake.
                                  type: string
                                subjectAltNames:
                                  description: |-
                                    A list of alternate names to verify the subject identity in the
                                    certificate. If specified, the proxy will verify that the server
                                    certificate's subject alt name matches one of the specified values.
                                    If specified, this list overrides the value of subject_alt_names
                                    from the ServiceEntry.
                                  items:
                                    type: string
                                  type: array
                              type: object
                          type: object
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    lifecycle:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0Lifecycle'
                    livenessProbe:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0Probe'
                    name:
                      type: string
                    podAnnotations:
                      additionalProperties:
                        type: string
                      type: object
                    podDisruptionBudget:
                      description: PodDisruptionBudget is an object to define the
                        max disruption that can be caused to a collection of pods
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          description: |-
                            Standard object's metadata.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
                          type: object
                        spec:
                          description: Specification of the desired behavior of the
                            PodDisruptionBudget.
                          properties:
                            maxUnavailable:
                              anyOf:
                              - type: integer
                              - type: string
                              description: |-
                                An eviction is allowed if at most "maxUnavailable" pods selected by
                                "selector" are unavailable after the eviction, i.e. even in absence of
                                the evicted pod. For example, one can prevent all voluntary evictions
                                by specifying 0. This is a mutually exclusive setting with "minAvailable".
                              x-kubernetes-int-or-string: true
                            minAvailable:
                              anyOf:
                              - type: integer
                              - type: string
                              description: |-
                                An eviction is allowed if at least "minAvailable" pods selected by
                                "selector" will still be available after the eviction, i.e. even in the
                                absence of the evicted pod.  So for example you can prevent all voluntary
                                evictions by specifying "100%".
                              x-kubernetes-int-or-string: true
                            selector:
                              description: |-
                                Label query over pods whose evictions are managed by the disruption
                                budget.
                                A null selector will match no pods, while an empty ({}) selector will select
                                all pods within the namespace.
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label
                                    selector requirements. The requirements are ANDed.
                                  items:
                                    description: |-
                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                      relates the key and values.
                                    properties:
                                      key:
                                        description: key is the label key that the
                                          selector applies to.
                                        type: string
                                      operator:
                                        description: |-
                                          operator represents a key's relationship to a set of values.
                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                        type: string
                                      values:
                                        description: |-
                                          values is an array of string values. If the operator is In or NotIn,
                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                          the values array must be empty. This array is replaced during a strategic
                                          merge patch.
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            unhealthyPodEvictionPolicy:
                              description: |-
                                UnhealthyPodEvictionPolicy defines the criteria for when unhealthy pods
                                should be considered for eviction. Current implementation considers healthy pods,
                                as pods that have status.conditions item with type="Ready",status="True".


                                Valid policies are IfHealthyBudget and AlwaysAllow.
                                If no policy is specified, the default behavior will be used,
                                which corresponds to the IfHealthyBudget policy.


                                IfHealthyBudget policy means that running pods (status.phase="Running"),
                                but not yet healthy can be evicted only if the guarded application is not
                                disrupted (status.currentHealthy is at least equal to status.desiredHealthy).
                                Healthy pods will be subject to the PDB for eviction.


                                AlwaysAllow policy means that all running pods (status.phase="Running"),
                                but not yet healthy are considered disrupted and can be evicted regardless
                                of whether the criteria in a PDB is met. This means perspective running
                                pods of a disrupted application might not get a chance to become healthy.
                                Healthy pods will be subject to the PDB for eviction.


                                Additional policies may be added in the future.
                                Clients making eviction decisions should disallow eviction of unhealthy pods
                                if they encounter an unrecognized policy in this field.


                                This field is beta-level. The eviction API uses this field when
                                the feature gate PDBUnhealthyPodEvictionPolicy is enabled (enabled by default).
                              type: string
                          type: object
                        status:
                          description: Most recently observed status of the PodDisruptionBudget.
                          properties:
                            conditions:
                              description: |-
                                Conditions contain conditions for PDB. The disruption controller sets the
                                DisruptionAllowed condition. The following are known values for the reason field
                                (additional reasons could be added in the future):
                                - SyncFailed: The controller encountered an error and wasn't able to compute
                                              the number of allowed disruptions. Therefore no disruptions are
                                              allowed and the status of the condition will be False.
                                - InsufficientPods: The number of pods are either at or below the number
                                                    required by the PodDisruptionBudget. No disruptions are
                                                    allowed and the status of the condition will be False.
                                - SufficientPods: There are more pods than required by the PodDisruptionBudget.
                                                  The condition will be True, and the number of allowed
                                                  disruptions are provided by the disruptionsAllowed property.
                              items:
                                description: "Condition contains details for one aspect
                                  of the current state of this API Resource.\n---\nThis
                                  struct is intended for direct use as an array at
                                  the field path .status.conditions.  For example,\n\n\n\ttype
                                  FooStatus struct{\n\t    // Represents the observations
                                  of a foo's current state.\n\t    // Known .status.conditions.type
                                  are: \"Available\", \"Progressing\", and \"Degraded\"\n\t
                                  \   // +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t
                                  \   // +listType=map\n\t    // +listMapKey=type\n\t
                                  \   Conditions []metav1.Condition `json:\"conditions,omitempty\"
                                  patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                                  \   // other fields\n\t}"
                                properties:
                                  lastTransitionTime:
                                    description: |-
                                      lastTransitionTime is the last time the condition transitioned from one status to another.
                                      This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                                    format: date-time
                                    type: string
                                  message:
                                    description: |-
                                      message is a human readable message indicating details about the transition.
                                      This may be an empty string.
                                    maxLength: 32768
                                    type: string
                                  observedGeneration:
                                    description: |-
                                      observedGeneration represents the .metadata.generation that the condition was set based upon.
                                      For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                                      with respect to the current state of the instance.
                                    format: int64
                                    minimum: 0
                                    type: integer
                                  reason:
                                    description: |-
                                      reason contains a programmatic identifier indicating the reason for the condition's last transition.
                                      Producers of specific condition types may define expected values and meanings for this field,
                                      and whether the values are considered a guaranteed API.
                                      The value should be a CamelCase string.
                                      This field may not be empty.
                                    maxLength: 1024
                                    minLength: 1
                                    pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                                    type: string
                                  status:
                                    description: status of the condition, one of True,
                                      False, Unknown.
                                    enum:
                                    - "True"
                                    - "False"
                                    - Unknown
                                    type: string
                                  type:
                                    description: |-
                                      type of condition in CamelCase or in foo.example.com/CamelCase.
                                      ---
                                      Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                                      useful (see .node.status.conditions), the ability to deconflict is important.
                                      The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                                    maxLength: 316
                                    pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                                    type: string
                                required:
                                - lastTransitionTime
                                - message
                                - reason
                                - status
                                - type
                                type: object
                              type: array
                              x-kubernetes-list-map-keys:
                              - type
                              x-kubernetes-list-type: map
                            currentHealthy:
                              description: current number of healthy pods
                              format: int32
                              type: integer
                            desiredHealthy:
                              description: minimum desired number of healthy pods
                              format: int32
                              type: integer
                            disruptedPods:
                              additionalProperties:
                                format: date-time
                                type: string
                              description: |-
                                DisruptedPods contains information about pods whose eviction was
                                processed by the API server eviction subresource handler but has not
                                yet been observed by the PodDisruptionBudget controller.
                                A pod will be in this map from the time when the API server processed the
                                eviction request to the time when the pod is seen by PDB controller
                                as having been marked for deletion (or after a timeout). The key in the map is the name of the pod
                                and the value is the time when the API server processed the eviction request. If
                                the deletion didn't occur and a pod is still there it will be removed from
                                the list automatically by PodDisruptionBudget controller after some time.
                                If everything goes smooth this map should be empty for the most of the time.
                                Large number of entries in the map may indicate problems with pod deletions.
                              type: object
                            disruptionsAllowed:
                              description: Number of pod disruptions that are currently
                                allowed.
                              format: int32
                              type: integer
                            expectedPods:
                              description: total number of pods counted by this disruption
                                budget
                              format: int32
                              type: integer
                            observedGeneration:
                              description: |-
                                Most recent generation observed when updating this PDB status. DisruptionsAllowed and other
                                status information is valid only if observedGeneration equals to PDB's object generation.
                              format: int64
                              type: integer
                          required:
                          - currentHealthy
                          - desiredHealthy
                          - disruptionsAllowed
                          - expectedPods
                          type: object
                      type: object
                    ports:
                      items:
                        properties:
                          containerPort:
                            format: int32
                            type: integer
                          default:
                            description: |-
                              Default denotes that this port will receive the default hostnames for the service. This is only useful if a
                              service exposes multiple ports over the same ingress gateway (mode: public or private). If only one port is
                              exposed, it will be the default port. If multiple ports are exposed and no default is specified and a port with
                              the `http` name is present, it will become the default port. If multiple ports are specified and the `http` port
                              is not present, validation will fail. Only Mode == (private|public) use the default flag, as they are trafficked
                              through the same external port. Internal ports can have the same hostnames since they can be selected by port
                              number.
                            type: boolean
                          hosts:
                            items:
                              type: string
                            type: array
                          ingressPort:
                            format: int32
                            type: integer
                          ingresses:
                            items:
                              type: string
                            type: array
                          istio:
                            properties:
                              http:
                                properties:
                                  retries:
                                    properties:
                                      attempts:
                                        format: int32
                                        type: integer
                                      perTryTimeout:
                                        type: string
                                      retryOn:
                                        type: string
                                    type: object
                                  timeout:
                                    type: string
                                type: object
                            type: object
                          mode:
                            type: string
                          name:
                            type: string
                          port:
                            format: int32
                            type: integer
                          protocol:
                            default: TCP
                            type: string
                        required:
                        - mode
                        - name
                        type: object
                      type: array
                    priorityClassName:
                      type: string
                    readinessProbe:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0Probe'
                    release:
                      properties:
                        eligible:
                          type: boolean
                        geometricScaling:
                          properties:
                            delay:
                              type: string
                            factor:
                              format: int32
                              type: integer
                            start:
                              format: int32
                              type: integer
                          type: object
                        linearScaling:
                          properties:
                            delay:
                              type: string
                            increment:
                              format: int32
                              type: integer
                          type: object
                        max:
                          format: int32
                          type: integer
                        scalingStrategy:
                          type: string
                        schedule:
                          type: string
                        ttl:
                          format: int64
                          type: integer
                      type: object
                    resources:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                    scale:
                      properties:
                        default:
                          format: int32
                          type: integer
                        kedaWorker:
                          description: KedaWorker specifies parameters for KEDA. See
                            https://github.com/kedacore/keda
                          properties:
                            advanced:
                              description: AdvancedConfig specifies advance scaling
                                options
                              properties:
                                horizontalPodAutoscalerConfig:
                                  description: HorizontalPodAutoscalerConfig specifies
                                    horizontal scale config
                                  properties:
                                    behavior:
                                      description: |-
                                        HorizontalPodAutoscalerBehavior configures the scaling behavior of the target
                                        in both Up and Down directions (scaleUp and scaleDown fields respectively).
                                      properties:
                                        scaleDown:
                                          description: |-
                                            scaleDown is scaling policy for scaling Down.
                                            If not set, the default value is to allow to scale down to minReplicas pods, with a
                                            300 second stabilization window (i.e., the highest recommendation for
                                            the last 300sec is used).
                                          properties:
                                            policies:
                                              description: |-
                                                policies is a list of potential scaling polices which can be used during scaling.
                                                At least one policy must be specified, otherwise the HPAScalingRules will be discarded as invalid
                                              items:
                                                description: HPAScalingPolicy is a
                                                  single policy which must hold true
                                                  for a specified past interval.
                                                properties:
                                                  periodSeconds:
                                                    description: |-
                                                      periodSeconds specifies the window of time for which the policy should hold true.
                                                      PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
                                                    format: int32
                                                    type: integer
                                                  type:
                                                    description: type is used to specify
                                                      the scaling policy.
                                                    type: string
                                                  value:
                                                    description: |-
                                                      value contains the amount of change which is permitted by the policy.
                                                      It must be greater than zero
                                                    format: int32
                                                    type: integer
                                                required:
                                                - periodSeconds
                                                - type
                                                - value
                                                type: object
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            selectPolicy:
                                              description: |-
                                                selectPolicy is used to specify which policy should be used.
                                                If not set, the default value Max is used.
                                              type: string
                                            stabilizationWindowSeconds:
                                              description: |-
                                                stabilizationWindowSeconds is the number of seconds for which past recommendations should be
                                                considered while scaling up or scaling down.
                                                StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
                                                If not set, use the default values:
                                                - For scale up: 0 (i.e. no stabilization is done).
                                                - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
                                              format: int32
                                              type: integer
                                          type: object
                                        scaleUp:
                                          description: |-
                                            scaleUp is scaling policy for scaling Up.
                                            If not set, the default value is the higher of:
                                              * increase no more than 4 pods per 60 seconds
                                              * double the number of pods per 60 seconds
                                            No stabilization is used.
                                          properties:
                                            policies:
                                              description: |-
                                                policies is a list of potential scaling polices which can be used during scaling.
                                                At least one policy must be specified, otherwise the HPAScalingRules will be discarded as invalid
                                              items:
                                                description: HPAScalingPolicy is a
                                                  single policy which must hold true
                                                  for a specified past interval.
                                                properties:
                                                  periodSeconds:
                                                    description: |-
                                                      periodSeconds specifies the window of time for which the policy should hold true.
                                                      PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
                                                    format: int32
                                                    type: integer
                                                  type:
                                                    description: type is used to specify
                                                      the scaling policy.
                                                    type: string
                                                  value:
                                                    description: |-
                                                      value contains the amount of change which is permitted by the policy.
                                                      It must be greater than zero
                                                    format: int32
                                                    type: integer
                                                required:
                                                - periodSeconds
                                                - type
                                                - value
                                                type: object
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            selectPolicy:
                                              description: |-
                                                selectPolicy is used to specify which policy should be used.
                                                If not set, the default value Max is used.
                                              type: string
                                            stabilizationWindowSeconds:
                                              description: |-
                                                stabilizationWindowSeconds is the number of seconds for which past recommendations should be
                                                considered while scaling up or scaling down.
                                                StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
                                                If not set, use the default values:
                                                - For scale up: 0 (i.e. no stabilization is done).
                                                - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
                                              format: int32
                                              type: integer
                                          type: object
                                      type: object
                                    name:
                                      type: string
                                  type: object
                                restoreToOriginalReplicaCount:
                                  type: boolean
                                scalingModifiers:
                                  description: ScalingModifiers describes advanced
                                    scaling logic options like formula
                                  properties:
                                    activationTarget:
                                      type: string
                                    formula:
                                      type: string
                                    metricType:
                                      description: |-
                                        MetricTargetType specifies the type of metric being targeted, and should be either
                                        "Value", "AverageValue", or "Utilization"
                                      enum:
                                      - AverageValue
                                      - Value
                                      type: string
                                    target:
                                      type: string
                                  type: object
                              type: object
                            awsEksAuth:
                              type: boolean
                            cooldownPeriod:
                              format: int32
                              type: integer
                            fallback:
                              description: Fallback is the spec for fallback options
                              properties:
                                behavior:
                                  default: static
                                  enum:
                                  - static
                                  - currentReplicas
                                  - currentReplicasIfHigher
                                  - currentReplicasIfLower
                                  type: string
                                failureThreshold:
                                  format: int32
                                  type: integer
                                replicas:
                                  format: int32
                                  type: integer
                              required:
                              - failureThreshold
                              - replicas
                              type: object
                            idleReplicaCount:
                              format: int32
                              type: integer
                            maxReplicaCount:
                              format: int32
                              type: integer
                            minReplicaCount:
                              format: int32
                              type: integer
                            triggers:
                              items:
                                description: ScaleTriggers reference the scaler that
                                  will be used
                                properties:
                                  authenticationRef:
                                    description: |-
                                      AuthenticationRef points to the TriggerAuthentication or ClusterTriggerAuthentication object that
                                      is used to authenticate the scaler with the environment
                                    properties:
                                      kind:
                                        description: Kind of the resource being referred
                                          to. Defaults to TriggerAuthentication.
                                        type: string
                                      name:
                                        type: string
                                    required:
                                    - name
                                    type: object
                                  metadata:
                                    additionalProperties:
                                      type: string
                                    type: object
                                  metricType:
                                    description: |-
                                      MetricTargetType specifies the type of metric being targeted, and should be either
                                      "Value", "AverageValue", or "Utilization"
                                    type: string
                                  name:
                                    type: string
                                  type:
                                    type: string
                                  useCachedMetrics:
                                    type: boolean
                                required:
                                - metadata
                                - type
                                type: object
                              type: array
                          required:
                          - triggers
                          type: object
                        max:
                          format: int32
                          type: integer
                        min:
                          format: int32
                          type: integer
                        minReadySeconds:
                          format: int32
                          type: integer
                        requestsRateMetric:
                          description: 'RequestsRateMetric refers to a Prometheus
                            Adapter metric. See: https://github.com/DirectXMan12/k8s-prometheus-adapter'
                          type: string
                        targetCPUUtilizationPercentage:
                          description: TargetCPUUtilizationPercentage scales based
                            on CPU percentage
                          format: int32
                          type: integer
                        targetMemoryUtilizationPercentage:
                          description: TargetMemoryUtilizationPercentage scales based
                            on Memory percentage
                          format: int32
                          type: integer
                        targetRequestsRate:
                          description: TargetRequestsRate scales based on the specified
                            RequestsRateMetric
                          type: string
                        worker:
                          description: Worker specifies parameters for Worker Pod
                            Autoscaler. See https://github.com/practo/k8s-worker-pod-autoscaler
                          properties:
                            maxDisruption:
                              type: string
                            queueUri:
                              type: string
                            secondsToProcessOneJobString:
                              type: string
                            targetMessagesPerWorker:
                              format: int32
                              type: integer
                          required:
                          - maxDisruption
                          - queueUri
                          - targetMessagesPerWorker
                          type: object
                      type: object
                    serviceAccountName:
                      type: string
                    serviceLevelObjectiveLabels:
                      properties:
                        alertLabels:
                          additionalProperties:
                            type: string
                          type: object
                        ruleLabels:
                          additionalProperties:
                            type: string
                          type: object
                        serviceLevelLabels:
                          additionalProperties:
                            type: string
                          type: object
                      type: object
                    serviceLevelObjectives:
                      items:
                        properties:
                          alerting:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                              name:
                                type: string
                              pageAlert:
                                properties:
                                  annotations:
                                    additionalProperties:
                                      type: string
                                    type: object
                                  disable:
                                    type: boolean
                                  labels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              ticketAlert:
                                properties:
                                  annotations:
                                    additionalProperties:
                                      type: string
                                    type: object
                                  disable:
                                    type: boolean
                                  labels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                            type: object
                          description:
                            type: string
                          enabled:
                            type: boolean
                          name:
                            type: string
                          objectivePercentString:
                            type: string
                          serviceLevelIndicator:
                            properties:
                              alertAfter:
                                type: string
                              canary:
                                properties:
                                  allowancePercent:
                                    type: number
                                  allowancePercentString:
                                    type: string
                                  enabled:
                                    type: boolean
                                  failAfter:
                                    type: string
                                required:
                                - enabled
                                type: object
                              errorQuery:
                                type: string
                              tagKey:
                                type: string
                              totalQuery:
                                type: string
                            type: object
                          serviceLevelObjectiveLabels:
                            properties:
                              alertLabels:
                                additionalProperties:
                                  type: string
                                type: object
                              ruleLabels:
                                additionalProperties:
                                  type: string
                                type: object
                              serviceLevelLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                        required:
                        - enabled
                        type: object
                      type: array
                    serviceMonitors:
                      items:
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          labels:
                            additionalProperties:
                              type: string
                            type: object
                          name:
                            type: string
                          sloRegex:
                            description: if true, and the Spec.Endpoints.MetricRelabelConfigs
                              does not specify a regex, will replace the regex with
                              a list of SLO metric names
                            type: boolean
                          spec:
                            description: ServiceMonitorSpec contains specification
                              parameters for a ServiceMonitor.
                            properties:
                              attachMetadata:
                                description: |-
                                  Attaches node metadata to discovered targets.
                                  Requires Prometheus v2.37.0 and above.
                                properties:
                                  node:
                                    description: When set to true, Prometheus must
                                      have permissions to get Nodes.
                                    type: boolean
                                type: object
                              endpoints:
                                description: A list of endpoints allowed as part of
                                  this ServiceMonitor.
                                items:
                                  description: Endpoint defines a scrapeable endpoint
                                    serving Prometheus metrics.
                                  properties:
                                    authorization:
                                      description: Authorization section for this
                                        endpoint
                                      properties:
                                        credentials:
                                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                          description: The secret's key that contains
                                            the credentials of the request
                                        type:
                                          description: |-
                                            Set the authentication type. Defaults to Bearer, Basic will cause an
                                            error
                                          type: string
                                      type: object
                                    basicAuth:
                                      description: |-
                                        BasicAuth allow an endpoint to authenticate over basic authentication
                                        More info: https://prometheus.io/docs/operating/configuration/#endpoints
                                      properties:
                                        password:
                                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                          description: |-
                                            The secret in the service monitor namespace that contains the password
                                            for authentication.
                                        username:
                                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                          description: |-
                                            The secret in the service monitor namespace that contains the username
                                            for authentication.
                                      type: object
                                    bearerTokenFile:
                                      description: File to read bearer token for scraping
                                        targets.
                                      type: string
                                    bearerTokenSecret:
                                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                      description: |-
                                        Secret to mount to read bearer token for scraping targets. The secret
                                        needs to be in the same namespace as the service monitor and accessible by
                                        the Prometheus Operator.
                                    enableHttp2:
                                      description: Whether to enable HTTP2.
                                      type: boolean
                                    filterRunning:
                                      description: |-
                                        Drop pods that are not running. (Failed, Succeeded). Enabled by default.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-phase
                                      type: boolean
                                    followRedirects:
                                      description: FollowRedirects configures whether
                                        scrape requests follow HTTP 3xx redirects.
                                      type: boolean
                                    honorLabels:
                                      description: HonorLabels chooses the metric's
                                        labels on collisions with target labels.
                                      type: boolean
                                    honorTimestamps:
                                      description: HonorTimestamps controls whether
                                        Prometheus respects the timestamps present
                                        in scraped data.
                                      type: boolean
                                    interval:
                                      description: |-
                                        Interval at which metrics should be scraped
                                        If not specified Prometheus' global scrape interval is used.
                                      pattern: ^(0|(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?)$
                                      type: string
                                    metricRelabelings:
                                      description: MetricRelabelConfigs to apply to
                                        samples before ingestion.
                                      items:
                                        description: |-
                                          RelabelConfig allows dynamic rewriting of the label set, being applied to samples before ingestion.
                                          It defines `<metric_relabel_configs>`-section of Prometheus configuration.
                                          More info: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#metric_relabel_configs
                                        properties:
                                          action:
                                            default: replace
                                            description: |-
                                              Action to perform based on regex matching. Default is 'replace'.
                                              uppercase and lowercase actions require Prometheus >= 2.36.
                                            enum:
                                            - replace
                                            - Replace
                                            - keep
                                            - Keep
                                            - drop
                                            - Drop
                                            - hashmod
                                            - HashMod
                                            - labelmap
                                            - LabelMap
                                            - labeldrop
                                            - LabelDrop
                                            - labelkeep
                                            - LabelKeep
                                            - lowercase
                                            - Lowercase
                                            - uppercase
                                            - Uppercase
                                            type: string
                                          modulus:
                                            description: Modulus to take of the hash
                                              of the source label values.
                                            format: int64
                                            type: integer
                                          regex:
                                            description: Regular expression against
                                              which the extracted value is matched.
                                              Default is '(.*)'
                                            type: string
                                          replacement:
                                            description: |-
                                              Replacement value against which a regex replace is performed if the
                                              regular expression matches. Regex capture groups are available. Default is '$1'
                                            type: string
                                          separator:
                                            description: Separator placed between
                                              concatenated source label values. default
                                              is ';'.
                                            type: string
                                          sourceLabels:
                                            description: |-
                                              The source labels select values from existing labels. Their content is concatenated
                                              using the configured separator and matched against the configured regular expression
                                              for the replace, keep, and drop actions.
                                            items:
                                              description: LabelName is a valid Prometheus
                                                label name which may only contain
                                                ASCII letters, numbers, as well as
                                                underscores.
                                              pattern: ^[a-zA-Z_][a-zA-Z0-9_]*$
                                              type: string
                                            type: array
                                          targetLabel:
                                            description: |-
                                              Label to which the resulting value is written in a replace action.
                                              It is mandatory for replace actions. Regex capture groups are available.
                                            type: string
                                        type: object
                                      type: array
                                    oauth2:
                                      description: OAuth2 for the URL. Only valid
                                        in Prometheus versions 2.27.0 and newer.
                                      properties:
                                        clientId:
                                          description: The secret or configmap containing
                                            the OAuth2 client id
                                          properties:
                                            configMap:
                                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0ConfigMapKeySelector'
                                              description: ConfigMap containing data
                                                to use for the targets.
                                            secret:
                                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                              description: Secret containing data
                                                to use for the targets.
                                          type: object
                                        clientSecret:
                                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                          description: The secret containing the OAuth2
                                            client secret
                                        endpointParams:
                                          additionalProperties:
                                            type: string
                                          description: Parameters to append to the
                                            token URL
                                          type: object
                                        scopes:
                                          description: OAuth2 scopes used for the
                                            token request
                                          items:
                                            type: string
                                          type: array
                                        tokenUrl:
                                          description: The URL to fetch the token
                                            from
                                          minLength: 1
                                          type: string
                                      required:
                                      - clientId
                                      - clientSecret
                                      - tokenUrl
                                      type: object
                                    params:
                                      additionalProperties:
                                        items:
                                          type: string
                                        type: array
                                      description: Optional HTTP URL parameters
                                      type: object
                                    path:
                                      description: |-
                                        HTTP path to scrape for metrics.
                                        If empty, Prometheus uses the default value (e.g. `/metrics`).
                                      type: string
                                    port:
                                      description: Name of the service port this endpoint
                                        refers to. Mutually exclusive with targetPort.
                                      type: string
                                    proxyUrl:
                                      description: ProxyURL eg http://proxyserver:2195
                                        Directs scrapes to proxy through this endpoint.
                                      type: string
                                    relabelings:
                                      description: |-
                                        RelabelConfigs to apply to samples before scraping.
                                        Prometheus Operator automatically adds relabelings for a few standard Kubernetes fields.
                                        The original scrape job's name is available via the `__tmp_prometheus_job_name` label.
                                        More info: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config
                                      items:
                                        description: |-
                                          RelabelConfig allows dynamic rewriting of the label set, being applied to samples before ingestion.
                                          It defines `<metric_relabel_configs>`-section of Prometheus configuration.
                                          More info: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#metric_relabel_configs
                                        properties:
                                          action:
                                            default: replace
                                            description: |-
                                              Action to perform based on regex matching. Default is 'replace'.
                                              uppercase and lowercase actions require Prometheus >= 2.36.
                                            enum:
                                            - replace
                                            - Replace
                                            - keep
                                            - Keep
                                            - drop
                                            - Drop
                                            - hashmod
                                            - HashMod
                                            - labelmap
                                            - LabelMap
                                            - labeldrop
                                            - LabelDrop
                                            - labelkeep
                                            - LabelKeep
                                            - lowercase
                                            - Lowercase
                                            - uppercase
                                            - Uppercase
                                            type: string
                                          modulus:
                                            description: Modulus to take of the hash
                                              of the source label values.
                                            format: int64
                                            type: integer
                                          regex:
                                            description: Regular expression against
                                              which the extracted value is matched.
                                              Default is '(.*)'
                                            type: string
                                          replacement:
                                            description: |-
                                              Replacement value against which a regex replace is performed if the
                                              regular expression matches. Regex capture groups are available. Default is '$1'
                                            type: string
                                          separator:
                                            description: Separator placed between
                                              concatenated source label values. default
                                              is ';'.
                                            type: string
                                          sourceLabels:
                                            description: |-
                                              The source labels select values from existing labels. Their content is concatenated
                                              using the configured separator and matched against the configured regular expression
                                              for the replace, keep, and drop actions.
                                            items:
                                              description: LabelName is a valid Prometheus
                                                label name which may only contain
                                                ASCII letters, numbers, as well as
                                                underscores.
                                              pattern: ^[a-zA-Z_][a-zA-Z0-9_]*$
                                              type: string
                                            type: array
                                          targetLabel:
                                            description: |-
                                              Label to which the resulting value is written in a replace action.
                                              It is mandatory for replace actions. Regex capture groups are available.
                                            type: string
                                        type: object
                                      type: array
                                    scheme:
                                      description: HTTP scheme to use for scraping.
                                      type: string
                                    scrapeTimeout:
                                      description: |-
                                        Timeout after which the scrape is ended
                                        If not specified, the Prometheus global scrape timeout is used unless it is less than `Interval` in which the latter is used.
                                      pattern: ^(0|(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?)$
                                      type: string
                                    targetPort:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: Name or number of the target port
                                        of the Pod behind the Service, the port must
                                        be specified with container port property.
                                        Mutually exclusive with port.
                                      x-kubernetes-int-or-string: true
                                    tlsConfig:
                                      description: TLS configuration to use when scraping
                                        the endpoint
                                      properties:
                                        ca:
                                          description: Certificate authority used
                                            when verifying server certificates.
                                          properties:
                                            configMap:
                                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0ConfigMapKeySelector'
                                              description: ConfigMap containing data
                                                to use for the targets.
                                            secret:
                                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                              description: Secret containing data
                                                to use for the targets.
                                          type: object
                                        caFile:
                                          description: Path to the CA cert in the
                                            Prometheus container to use for the targets.
                                          type: string
                                        cert:
                                          description: Client certificate to present
                                            when doing client-authentication.
                                          properties:
                                            configMap:
                                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0ConfigMapKeySelector'
                                              description: ConfigMap containing data
                                                to use for the targets.
                                            secret:
                                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                              description: Secret containing data
                                                to use for the targets.
                                          type: object
                                        certFile:
                                          description: Path to the client cert file
                                            in the Prometheus container for the targets.
                                          type: string
                                        insecureSkipVerify:
                                          description: Disable target certificate
                                            validation.
                                          type: boolean
                                        keyFile:
                                          description: Path to the client key file
                                            in the Prometheus container for the targets.
                                          type: string
                                        keySecret:
                                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                                          description: Secret containing the client
                                            key file for the targets.
                                        serverName:
                                          description: Used to verify the hostname
                                            for the targets.
                                          type: string
                                      type: object
                                  type: object
                                type: array
                              jobLabel:
                                description: |-
                                  JobLabel selects the label from the associated Kubernetes service which will be used as the `job` label for all metrics.


                                  For example:
                                  If in `ServiceMonitor.spec.jobLabel: foo` and in `Service.metadata.labels.foo: bar`,
                                  then the `job="bar"` label is added to all metrics.


                                  If the value of this field is empty or if the label doesn't exist for the given Service, the `job` label of the metrics defaults to the name of the Kubernetes Service.
                                type: string
                              labelLimit:
                                description: |-
                                  Per-scrape limit on number of labels that will be accepted for a sample.
                                  Only valid in Prometheus versions 2.27.0 and newer.
                                format: int64
                                type: integer
                              labelNameLengthLimit:
                                description: |-
                                  Per-scrape limit on length of labels name that will be accepted for a sample.
                                  Only valid in Prometheus versions 2.27.0 and newer.
                                format: int64
                                type: integer
                              labelValueLengthLimit:
                                description: |-
                                  Per-scrape limit on length of labels value that will be accepted for a sample.
                                  Only valid in Prometheus versions 2.27.0 and newer.
                                format: int64
                                type: integer
                              namespaceSelector:
                                description: Selector to select which namespaces the
                                  Kubernetes Endpoints objects are discovered from.
                                properties:
                                  any:
                                    description: |-
                                      Boolean describing whether all namespaces are selected in contrast to a
                                      list restricting them.
                                    type: boolean
                                  matchNames:
                                    description: List of namespace names to select
                                      from.
                                    items:
                                      type: string
                                    type: array
                                type: object
                              podTargetLabels:
                                description: PodTargetLabels transfers labels on the
                                  Kubernetes `Pod` onto the created metrics.
                                items:
                                  type: string
                                type: array
                              sampleLimit:
                                description: SampleLimit defines per-scrape limit
                                  on number of scraped samples that will be accepted.
                                format: int64
                                type: integer
                              selector:
                                description: Selector to select Endpoints objects.
                                properties:
                                  matchExpressions:
                                    description: matchExpressions is a list of label
                                      selector requirements. The requirements are
                                      ANDed.
                                    items:
                                      description: |-
                                        A label selector requirement is a selector that contains values, a key, and an operator that
                                        relates the key and values.
                                      properties:
                                        key:
                                          description: key is the label key that the
                                            selector applies to.
                                          type: string
                                        operator:
                                          description: |-
                                            operator represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists and DoesNotExist.
                                          type: string
                                        values:
                                          description: |-
                                            values is an array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. This array is replaced during a strategic
                                            merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                    x-kubernetes-list-type: atomic
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    description: |-
                                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                                    type: object
                                type: object
                                x-kubernetes-map-type: atomic
                              targetLabels:
                                description: TargetLabels transfers labels from the
                                  Kubernetes `Service` onto the created metrics.
                                items:
                                  type: string
                                type: array
                              targetLimit:
                                description: TargetLimit defines a limit on the number
                                  of scraped targets that will be accepted.
                                format: int64
                                type: integer
                            required:
                            - endpoints
                            - selector
                            type: object
                        required:
                        - name
                        - sloRegex
                        type: object
                      type: array
                    sidecars:
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Container'
                      type: array
                    tolerations:
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                      type: array
                    topologySpreadConstraint:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0TopologySpreadConstraint'
                    volumeMounts:
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeMount'
                      type: array
                    volumes:
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Volume'
                      type: array
                  required:
                  - fleet
                  - name
                  - scale
                  type: object
                type: array
            required:
            - app
            - failed
            - targets
            type: object
          status:
            description: RevisionStatus defines the observed state of Revision
            properties:
              sentry:
                properties:
                  release:
                    type: boolean
                type: object
              targets:
                items:
                  description: RevisionStatus defines the observed state of Revision
                  properties:
                    name:
                      type: string
                    release:
                      properties:
                        currentPercent:
                          format: int32
                          type: integer
                        peakPercent:
                          format: int32
                          type: integer
                      required:
                      - currentPercent
                      - peakPercent
                      type: object
                    scale:
                      properties:
                        current:
                          format: int32
                          type: integer
                        desired:
                          format: int32
                          type: integer
                        peak:
                          format: int32
                          type: integer
                      required:
                      - current
                      - desired
                      - peak
                      type: object
                    state:
                      type: string
                  required:
                  - name
                  - release
                  - scale
                  type: object
                type: array
            required:
            - sentry
            - targets
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
